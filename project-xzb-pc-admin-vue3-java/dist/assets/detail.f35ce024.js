import{_ as me,d as pe,c as Fe,b as he,a as o,m as fe,e as h,h as n,k as e,v as d,g as c,i as r,f as Ce,w as f,F as Q,t as Ee,C as B,o as i,p as ge,j as De,n as Be}from"./index.ea7872bb.js";import{_ as Y,a as ye,b as be}from"./icon_more.b9cfa6a9.js";import{I as X}from"./index.d895b47c.js";import{C as ke}from"./index.4feaa7d6.js";import{D as xe}from"./index.5f69b05a.js";const a=C=>(ge("data-v-348c433b"),C=C(),De(),C),Ie={class:"detail-base bg-wt"},Ae=a(()=>e("div",{class:"title"},"\u4E1A\u52A1\u4FE1\u606F",-1)),we={class:"headBox"},Te={class:"form"},Se={class:"card"},Ne=a(()=>e("div",{class:"name"},"\u8BC4\u4EF7\u5BF9\u8C61\u7F16\u53F7",-1)),Re={class:"contents"},Ve={class:"form"},He={class:"card"},ze=a(()=>e("div",{class:"name"},"\u8BC4\u4EF7\u5BF9\u8C61",-1)),Me={class:"contents"},$e={class:"form"},Le={class:"card"},je=a(()=>e("div",{class:"name"},"\u8BC4\u4EF7\u8BC4\u5206",-1)),qe={class:"contents"},Ue={class:"form"},We={class:"card"},Ge=a(()=>e("div",{class:"name"},"\u53D1\u5E03\u4EBA\u7F16\u53F7",-1)),Je={class:"contents"},Ke={class:"contentBody bg-wt"},Oe=a(()=>e("div",{class:"title"},"\u8BC4\u4EF7\u4FE1\u606F",-1)),Pe={class:"detail"},Qe={class:"detailHead"},Xe={class:"user"},Ye=["src"],Ze={key:1,src:Y,alt:""},et={class:"op"},tt={class:"orderStar"},st={class:"content"},ut={class:"body"},at=["innerHTML"],ot={key:0,class:"picture"},lt={class:"tdesign-demo-image-viewer__ui-image"},it=["src"],nt=["onClick"],dt={class:"top"},ct={class:"orderStar"},rt={class:"time"},vt={class:"op"},_t=a(()=>e("div",null,null,-1)),mt=a(()=>e("div",null,null,-1)),pt=a(()=>e("span",null,"\u5220\u9664",-1)),Ft=[mt,pt],ht={class:"card2"},ft={class:"left2"},Ct=["src"],Et={key:1,src:Y,alt:""},gt={class:"right2"},Dt={key:0,class:"user"},Bt={key:1,class:"user"},yt={key:0},bt={class:"content"},kt=["innerHTML"],xt={class:"foot2"},It={class:"operation"},At=["onClick"],wt=a(()=>e("div",null,null,-1)),Tt=a(()=>e("span",null,"\u5220\u9664",-1)),St=[wt,Tt],Nt={key:0,class:"replyBoxBottom fx bg-wt"},Rt=a(()=>e("img",{src:ye,alt:""},null,-1)),Vt={key:1,class:"replyBoxBottom fx bg-wt"},Ht=a(()=>e("img",{src:be,alt:"",class:"retract"},null,-1)),zt={class:"reply bg-wt"},Mt=a(()=>e("div",{class:"head"},"\u56DE\u590D\u8BC4\u4EF7",-1)),$t={class:"body"},Lt=a(()=>e("span",{class:"fastReply"},"\u5FEB\u901F\u56DE\u590D:",-1)),jt={class:"tip"},qt=a(()=>e("button",{type:"submit",class:Be("bt btn-submit bt-disabled")},[e("span",null,"\u56DE\u590D")],-1)),Ut=a(()=>e("span",{class:"bt-tip"},"\u6CE8\u610F\uFF1A\u7BA1\u7406\u5458\u56DE\u590D\u5185\u5BB9\u4F1A\u5728\u524D\u53F0\u663E\u793A",-1)),Wt=pe({__name:"detail",setup(C){const T=Fe();he();const v=o(!1),y=o("\u6B64\u64CD\u4F5C\u5C06\u6C38\u4E45\u5220\u9664\u8FD9\u6761\u8BC4\u4EF7\uFF0C\u662F\u5426\u7EE7\u7EED\uFF1F"),Z=o({}),b=o({}),k=o(""),x=o(""),I=o(!1),{id:S}=T.params,{targetType:ee}=T.params,te=o({targetTypeId:ee}),se=o(0),N=o(),_=o([]),t=o({}),A=o({ownerId:"",evaluationId:"",parentId:0,isAnonymous:0,content:"",pictureArray:[]}),E=o({evaluationId:"",pageNo:1,pageSize:0,sortBy:1,targetTypeId:te.value.targetTypeId}),R=async()=>{E.value.evaluationId=S.toString(),E.value.pageSize===0?E.value.pageSize=5:E.value.pageSize+=100};o(0),fe(()=>{R()});const m=o({content:""}),ue=()=>{window.history.go(-1)},ae={content:[{required:!0,message:"\u8BF7\u8F93\u5165\u56DE\u590D\u5185\u5BB9",type:"error",trigger:"blur"},{validator:l=>{},message:"\u8BF7\u8F93\u5165\u81F3\u5C112\u4E2A\u5B57\u7B26,\u81F3\u591A\u4E2A\u5B57\u7B26",type:"error",trigger:"blur"}]},oe=async l=>{l.validateResult===!0&&(A.value.content=m.value.content,A.value.evaluationId=String(S),A.value.ownerId=t.value.ownerId)},V=()=>{v.value=!1,I.value=!1},le=l=>{y.value="\u6B64\u64CD\u4F5C\u5C06\u6C38\u4E45\u5220\u9664\u8FD9\u6761\u8BC4\u4EF7\uFF0C\u662F\u5426\u7EE7\u7EED\uFF1F",Z.value=l,v.value=!0},ie=async()=>{N.value},ne=l=>{b.value=l,b.value.isTop===0?(x.value="\u7F6E\u9876\u8BC4\u4EF7",k.value="\u6B64\u64CD\u4F5C\u5C06\u7F6E\u9876\u8FD9\u6761\u8BC4\u4EF7\uFF0C\u662F\u5426\u7EE7\u7EED\uFF1F"):(x.value="\u53D6\u6D88\u7F6E\u9876",k.value="\u6B64\u64CD\u4F5C\u5C06\u53D6\u6D88\u7F6E\u9876\u8FD9\u6761\u8BC4\u4EF7\uFF0C\u662F\u5426\u7EE7\u7EED\uFF1F"),I.value=!0},H=l=>{if(!l)return l;let s=l;const g=/\[([\u4e00-\u9fa5]+)\]/g,w=s.match(g);return g.test(s)&&w.forEach(p=>{X.filter(F=>F.id===p).length&&(s=s.replace(p,`<img data-v-1fd959d1="" width="20" height="20" src="${X.filter(F=>F.id===p)[0].src}" alt="" class="emoji-icon" style="vertical-align: text-top;">`))}),s},de=async()=>{b.value.isTop},ce=()=>{R()},re=()=>{_.value=_.value.slice(0,5)},ve=(l,s)=>{se.value=l,N.value=s,y.value="\u6B64\u64CD\u4F5C\u5C06\u6C38\u4E45\u5220\u9664\u8FD9\u6761\u56DE\u590D\uFF0C\u662F\u5426\u7EE7\u7EED\uFF1F",v.value=!v.value},z=l=>{m.value.content=l};return(l,s)=>{var M,$,L,j,q,U,W;const g=h("t-rate"),w=h("t-image-viewer"),p=h("t-textarea"),D=h("t-form-item"),F=h("t-form");return i(),n(Q,null,[e("div",Ie,[Ae,e("div",we,[e("div",Te,[e("div",Se,[Ne,e("div",Re,d(t.value.targetId),1)])]),c(` <div class="form">\r
        <div class="card">\r
          <div class="name">\u4E0B\u5355\u65F6\u95F4</div>\r
          <div class="contents">{{ detailData.createTime }}</div>\r
        </div>\r
      </div>\r
      <div class="form">\r
        <div class="card">\r
          <div class="name">\u66F4\u65B0\u65F6\u95F4</div>\r
          <div class="contents">{{ detailData.updateTime }}</div>\r
        </div>\r
      </div> `),e("div",Ve,[e("div",He,[ze,e("div",Me,d(t.value.targetName),1)])]),e("div",$e,[e("div",Le,[je,e("div",qe,d(t.value.totalScore)+"\u5206",1)])]),e("div",Ue,[e("div",We,[Ge,e("div",Je,d(t.value.evaluatorId),1)])]),c(` <div class="form">\r
        <div class="card">\r
          <div class="name">\u8BC4\u4EF7\u4EBA</div>\r
          <div class="contents">{{ detailData.evaluatorInfo?.nickName }}</div>\r
        </div>\r
      </div> `)])]),e("div",Ke,[Oe,e("div",Pe,[e("div",Qe,[e("div",Xe,[(M=t.value.evaluatorInfo)!=null&&M.avatar?(i(),n("img",{key:0,src:($=t.value.evaluatorInfo)==null?void 0:$.avatar,alt:""},null,8,Ye)):(i(),n("img",Ze)),e("div",null,d((L=t.value.evaluatorInfo)==null?void 0:L.nickName),1)]),e("div",et,[e("div",tt,[r(g,{"default-value":t.value.totalScore%1!==0?Math.floor(t.value.totalScore)+.5:t.value.totalScore,"allow-half":"",disabled:"",size:"16px",gap:6,color:"#FF4C4C",class:"stars"},null,8,["default-value"]),e("span",null,d(t.value.totalScore)+"\u5206",1)])])]),e("div",st,[e("div",ut,[e("span",{innerHTML:H(t.value.content)},null,8,at)]),t.value.pictureArray?(i(),n("div",ot,[t.value.pictureArray.length>0?(i(),Ce(w,{key:0,images:t.value.pictureArray},{trigger:f(({open:u})=>[e("div",lt,[e("img",{alt:"test",src:t.value.pictureArray[0],class:"tdesign-demo-image-viewer__ui-image--img"},null,8,it),e("div",{class:"tdesign-demo-image-viewer__ui-image--hover",onClick:u},null,8,nt)])]),_:1},8,["images"])):c("v-if",!0)])):c("v-if",!0),e("div",dt,[e("div",ct,[e("div",rt,d(t.value.createTime),1)]),e("div",vt,[e("div",{class:"setTop",onClick:s[0]||(s[0]=u=>ne(t.value))},[_t,e("span",null,d(t.value.isTop==0?"\u7F6E\u9876":"\u53D6\u6D88\u7F6E\u9876"),1)]),e("div",{class:"delete",onClick:s[1]||(s[1]=u=>le(t.value))},Ft)])]),e("div",ht,[(i(!0),n(Q,null,Ee(_.value,(u,_e)=>{var G,J,K,O,P;return i(),n("div",{key:_e,class:"box"},[e("div",ft,[(G=u.replierInfo)!=null&&G.avatar?(i(),n("img",{key:0,src:(J=u.replierInfo)==null?void 0:J.avatar,alt:""},null,8,Ct)):(i(),n("img",Et))]),e("div",gt,[u.parentId==0?(i(),n("div",Dt,d((K=u.replierInfo)==null?void 0:K.nickName),1)):(i(),n("div",Bt,[B(d((O=u.replierInfo)==null?void 0:O.nickName)+" ",1),u.targetReplierInfo?(i(),n("span",yt,"\u56DE\u590D")):c("v-if",!0),B(" "+d((P=u.targetReplierInfo)==null?void 0:P.nickName),1)])),e("div",bt,[e("span",{innerHTML:H(u.content)},null,8,kt)]),e("div",xt,[e("span",null,d(u.createTime),1),c(" \u64CD\u4F5C "),e("div",It,[c(` <div class="like">\r
                    <div></div>\r
                    <span>{{\r
                      item.statistics?.likeNumber\r
                        ? item.statistics?.likeNumber\r
                        : 0\r
                    }}</span>\r
                  </div> `),e("div",{class:"delete",onClick:Gt=>ve(u.id,2)},St,8,At)])])])])}),128)),((j=t.value.statistics)==null?void 0:j.replyNumber)>5?(i(),n("div",Nt,[e("div",{class:"bt-more btfx fx-ct",onClick:s[2]||(s[2]=u=>ce())},[B(" \u5C55\u5F00\u5168\u90E8\u56DE\u590D "),Rt])])):c("v-if",!0),((q=_.value)==null?void 0:q.length)==((U=t.value.statistics)==null?void 0:U.replyNumber)&&((W=_.value)==null?void 0:W.length)>5?(i(),n("div",Vt,[e("div",{class:"bt-more btfx fx-ct",onClick:s[3]||(s[3]=u=>re())},[B(" \u6536\u8D77\u5168\u90E8\u56DE\u590D "),Ht])])):c("v-if",!0)])])]),e("div",zt,[Mt,e("div",$t,[r(F,{ref:"form",data:m.value,rules:ae,"label-width":0,"on-cancel":"onClickCloseBtn",onSubmit:oe},{default:f(()=>[r(D,{name:"content"},{default:f(()=>[r(p,{modelValue:m.value.content,"onUpdate:modelValue":s[4]||(s[4]=u=>m.value.content=u),class:"word",placeholder:"\u8BF7\u8F93\u5165\u81F3\u5C115\u4E2A\u5B57\u7B26"},null,8,["modelValue"])]),_:1}),r(D,null,{default:f(()=>[Lt,e("div",jt,[e("span",{onClick:s[5]||(s[5]=u=>z("\u60A8\u7684\u8BA4\u53EF\u662F\u6211\u4EEC\u6700\u5927\u7684\u6B23\u6170"))},"\u60A8\u7684\u8BA4\u53EF\u662F\u6211\u4EEC\u6700\u5927\u7684\u6B23\u6170"),e("span",{onClick:s[6]||(s[6]=u=>z("\u5BF9\u4E8E\u60A8\u7684\u53CD\u9988\uFF0C\u6211\u4EEC\u4F1A\u8BA4\u771F\u8003\u8651"))},"\u5BF9\u4E8E\u60A8\u7684\u53CD\u9988\uFF0C\u6211\u4EEC\u4F1A\u8BA4\u771F\u8003\u8651")])]),_:1}),r(D,{class:"submit"},{default:f(()=>[qt,Ut]),_:1})]),_:1},8,["data"])])])]),e("div",{class:"boxBottom fx fx-ct bg-wt"},[e("div",{class:"bt-back bt",onClick:ue},"\u8FD4\u56DE")]),c(" \u5220\u9664\u5F39\u5C42 "),r(xe,{"dialog-delete-visible":v.value,"delete-text":y.value,onHandleDelete:ie,onHandleClose:V},null,8,["dialog-delete-visible","delete-text"]),c(" \u786E\u8BA4\u7F6E\u9876\u5F39\u5C42 "),r(ke,{title:x.value,"dialog-confirm-visible":I.value,"confirm-text":k.value,onHandleConfirm:de,onHandleClose:V},null,8,["title","dialog-confirm-visible","confirm-text"])],64)}}});var Xt=me(Wt,[["__scopeId","data-v-348c433b"],["__file","D:/Workspace/front/jz/project-xzb-pc-admin-vue3-java/src/pages/reply/order/detail.vue"]]);export{Xt as default};
