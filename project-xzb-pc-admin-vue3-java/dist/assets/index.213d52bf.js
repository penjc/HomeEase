import{_ as j,d as $,A as H,b as R,a,e as C,o as I,h as N,k as r,i as n,w as v,E as K,K as J,n as V,v as W,g as F,G as q,c as Q,f as ee,V as te,W as ae,M as B,X as le,Y as ue,Z as se}from"./index.ea7872bb.js";import{l as ne}from"./lodash.ac2bf2f6.js";import{f as oe}from"./date.c3b55e74.js";import{N as ie}from"./index.9e60eedd.js";import{c as ce}from"./caret-down-small.e2efd16d.js";import{D as re}from"./index.5f69b05a.js";import{C as de}from"./index.4feaa7d6.js";import{a as ve}from"./index.8ec4d4b4.js";import"./dayjs.min.86ec729c.js";const pe=[{title:"\u670D\u52A1\u7F16\u53F7",align:"left",width:200,minWidth:"200px",colKey:"code"},{title:"\u670D\u52A1\u540D\u79F0",width:150,minWidth:"150px",colKey:"name"},{title:"\u670D\u52A1\u56FE\u6807",colKey:"serveTypeIcon",width:125,minWidth:"125px",cell:{col:"status"}},{title:"\u670D\u52A1\u56FE\u7247",colKey:"img",width:125,minWidth:"125px",cell:{col:"status"}},{title:"\u670D\u52A1\u5355\u4EF7\uFF08\u5143\uFF09",minWidth:"170px",sortType:"all",colKey:"referencePrice"},{title:"\u670D\u52A1\u7C7B\u578B",width:150,minWidth:"150px",colKey:"serveTypeName"},{title:"\u670D\u52A1\u63CF\u8FF0",colKey:"description",width:200,minWidth:"288px",cell:{col:"status"}},{title:"\u6392\u5E8F",minWidth:"150px",sorter:!0,sortType:"all",colKey:"sortNum"},{title:"\u72B6\u6001",colKey:"activeStatus",width:120,minWidth:"120px",filter:{type:"single",list:[{label:"\u8349\u7A3F",value:0},{label:"\u7981\u7528",value:1},{label:"\u542F\u7528",value:2}],showConfirmAndReset:!0},cell:(y,{row:c})=>{const o={0:{label:"\u8349\u7A3F"},2:{label:"\u542F\u7528"},1:{label:"\u7981\u7528"}};return y("span",{class:`status-dot status-dot-${c.activeStatus}`},o[c.activeStatus].label)}},{title:"\u66F4\u65B0\u65F6\u95F4",minWidth:"180px",colKey:"updateTime",sorter:!0,sortType:"all",cell:(y,{row:c})=>y("span",oe(new Date(c.updateTime)))},{align:"left",fixed:"right",width:157,minWidth:"157px",colKey:"op",title:"\u64CD\u4F5C"}];const me={class:"baseList bg-wt min-h"},fe={class:"tableBoxs"},_e={class:"newBox"},ge={class:"headPortrait"},he=["src"],Ce={class:"headPortrait"},Se={class:"tdesign-demo-image-viewer__ui-image"},Fe=["src"],ye=["onClick"],be={key:0,class:"hover"},De=["onClick"],xe=["onClick"],Be=["onClick"],Ae=$({__name:"TableList",props:{listData:{type:Object,default:()=>({})},pagination:{type:Object,default:()=>({})}},emits:["fetchData","handleSetupContract","handleBuild","handleClickDelete","handleSortChange","onPageChange"],setup(y,{emit:c}){const o=y;H(o,()=>{x.value=o.listData,p.value=o.pagination,p.value.current=o.pagination.defaultCurrent==1?1:o.pagination.defaultCurrent,p.value.pageSize=o.pagination.defaultPageSize==1?1:o.pagination.defaultPageSize,w.value=!1});const D=R(),d=a([{sortBy:"sortNum"},{sortBy:"updateTime"}]),A=a({table:{sortIcon:t=>t&&t(ce)}}),x=a([]),p=a({defaultPageSize:10,total:0,defaultCurrent:1}),g="index",u=a({status:""}),w=a(!0),S=t=>{d.value=t,c("handleSortChange",t)},h=a([1,2]),_=t=>{h.value=t},T=t=>{D.push("/service/ServiceList/editService/"+t.id)},E=(t,k)=>{c("handleSetupContract",t,k)},i=t=>{c("handleClickDelete",t)},l=t=>{p.value.defaultCurrent=t.current,p.value.defaultPageSize=t.pageSize,c("onPageChange",{defaultCurrent:t.current,defaultPageSize:t.pageSize})},z=()=>{c("handleBuild")};return(t,k)=>{const P=C("t-image-viewer"),L=C("t-table"),m=C("t-config-provider");return I(),N("div",me,[r("div",fe,[r("div",_e,[r("button",{class:"bt newBoxbutton",onClick:k[0]||(k[0]=s=>z())},"\u65B0\u5EFA")]),n(m,{"global-config":A.value},{default:v(()=>[n(L,{data:x.value,columns:K(pe),"row-key":g,"vertical-align":"middle",hover:!0,pagination:p.value.total<=10||!p.value.total?null:p.value,"disable-data-page":p.value.total<=10,"selected-row-keys":h.value,loading:w.value,sort:d.value,showSizeChanger:"","filter-value":u.value,"hide-sort-tips":!0,"show-sort-column-bg-color":!0,"table-layout":"fixed","multiple-sort":!0,"table-content-width":"100%",onPageChange:l,onSortChange:S,onSelectChange:_},{empty:v(()=>[n(ie)]),serveTypeIcon:v(({row:s})=>[r("div",ge,[r("img",{src:s.serveItemIcon,alt:"",class:"tdesign-demo-image-viewer__ui-image--img"},null,8,he)])]),img:v(({row:s})=>[r("div",Ce,[n(P,{images:[s.img]},{trigger:v(({open:b})=>[r("div",Se,[r("img",{alt:"test",src:s.img,class:"tdesign-demo-image-viewer__ui-image--img"},null,8,Fe),r("div",{class:"tdesign-demo-image-viewer__ui-image--hover",onClick:b},[r("span",null,[n(K(J),{size:"1.8em"})])],8,ye)])]),_:2},1032,["images"])])]),description:v(({row:s,rowIndex:b})=>[r("div",{class:V(["description",b<3?"shortDescription":""])},[r("span",null,W(s.description),1),s.description.length>36&&s.description.length<=200?(I(),N("span",be,W(s.description),1)):F("v-if",!0)],2)]),op:v(({row:s})=>[r("a",{class:V(s.activeStatus!==0?"text-forbidden btn-dl btn-split-right":"btn-dl btn-split-right"),onClick:b=>i(s)},"\u5220\u9664",10,De),r("a",{class:V(s.activeStatus===2?"text-forbidden font-bt line":"font-bt line"),onClick:b=>T(s)},"\u7F16\u8F91",10,xe),r("a",{class:"font-bt btn-split-left",onClick:b=>E(s,s.activeStatus)},W(s.activeStatus!==2?"\u542F\u7528":"\u7981\u7528"),9,Be)]),_:1},8,["data","columns","pagination","disable-data-page","selected-row-keys","loading","sort","filter-value"])]),_:1},8,["global-config"])])])}}});var we=j(Ae,[["__scopeId","data-v-7b2d30eb"],["__file","D:/Workspace/front/jz/project-xzb-pc-admin-vue3-java/src/pages/service/service/components/TableList.vue"]]);const Te={class:"formBox bg-wt"},Ee=$({__name:"SearchForm",props:{initSearch:{type:String||Number,default:0},typeSelect:{type:Array,default:()=>[]}},emits:["handleSearch","handleReset"],setup(y,{emit:c}){const o=y,D=a([]),d=a({serveTypeId:null,name:"",activeStatus:null}),A={serveTypeId:null,name:"",activeStatus:null},x=()=>{d.value={...A},c("handleReset"),c("handleSearch",d.value)},p=()=>{c("handleSearch",d.value)};return q(()=>{o.initSearch&&(d.value.serveTypeId=o.initSearch),D.value=o.typeSelect.map(g=>({label:g.name,value:g.id}))}),(g,u)=>{const w=C("t-input"),S=C("t-form-item"),h=C("t-col"),_=C("t-select"),T=C("t-row"),E=C("t-form");return I(),N("div",Te,[n(E,{ref:"form",data:d.value,"label-width":70},{default:v(()=>[n(T,null,{default:v(()=>[n(h,null,{default:v(()=>[n(S,{label:"\u670D\u52A1\u540D\u79F0\uFF1A",name:"name"},{default:v(()=>[n(w,{modelValue:d.value.name,"onUpdate:modelValue":u[0]||(u[0]=i=>d.value.name=i),class:"form-item-content",type:"search",placeholder:"\u8BF7\u8F93\u5165",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),n(h,null,{default:v(()=>[n(S,{label:"\u670D\u52A1\u7C7B\u578B\uFF1A",name:"serveTypeId"},{default:v(()=>[n(_,{modelValue:d.value.serveTypeId,"onUpdate:modelValue":u[1]||(u[1]=i=>d.value.serveTypeId=i),class:"form-item-content",options:D.value,placeholder:"\u8BF7\u9009\u62E9",clearable:""},null,8,["modelValue","options"])]),_:1})]),_:1}),n(h,null,{default:v(()=>[n(S,{label:"\u72B6\u6001\uFF1A",name:"status","label-width":42},{default:v(()=>[n(_,{modelValue:d.value.activeStatus,"onUpdate:modelValue":u[2]||(u[2]=i=>d.value.activeStatus=i),class:"form-item-content",options:K(ve),placeholder:"\u8BF7\u9009\u62E9",clearable:""},null,8,["modelValue","options"])]),_:1})]),_:1}),n(h,{class:"searchBtn"},{default:v(()=>[r("button",{class:"bt-grey wt-60",onClick:u[3]||(u[3]=i=>x())},"\u91CD\u7F6E"),r("button",{class:"bt wt-60",onClick:u[4]||(u[4]=i=>p())},"\u641C\u7D22")]),_:1})]),_:1})]),_:1},8,["data"])])}}});var ke=j(Ee,[["__scopeId","data-v-7fc65d3d"],["__file","D:/Workspace/front/jz/project-xzb-pc-admin-vue3-java/src/pages/service/service/components/SearchForm.vue"]]);const Ie={key:1,class:"base-up-wapper bgTable min-h"},ze=$({__name:"index",setup(y){const c=a(!0),o=Q(),D=R(),d=a(!1),A=a([]),x=a(!1),p=a("\u786E\u8BA4\u7981\u7528"),g=a(!1),u=a(!1),w=a("\u6B64\u64CD\u4F5C\u5C06\u6C38\u4E45\u5220\u9664\u8FD9\u6761\u4FE1\u606F\uFF0C\u662F\u5426\u7EE7\u7EED\uFF1F"),S=a("\u6B64\u64CD\u4F5C\u5C06\u6C38\u4E45\u7981\u7528\u8FD9\u6761\u4FE1\u606F\uFF0C\u662F\u5426\u7EE7\u7EED\uFF1F"),h=a(""),_=a(null),T=a([]),E=a(""),i=a({defaultPageSize:10,total:0,defaultCurrent:1,current:1}),l=a({isAsc1:!0,isAsc2:!1,orderBy1:"sortNum",orderBy2:"updateTime",pageNo:1,pageSize:10,name:"",serveTypeId:"",activeStatus:null}),z=a({isAsc1:!0,isAsc2:!1,orderBy1:"sortNum",orderBy2:"updateTime",pageNo:1,pageSize:10,name:"",serveTypeId:"",activeStatus:null}),t=a({id:"",flag:0}),k=e=>{l.value.name=e.name,l.value.serveTypeId=e.serveTypeId,l.value.activeStatus=e.activeStatus,l.value.pageNo=1,i.value.defaultCurrent=1,i.value.current=1,m(l.value)},P=()=>{_.value=null,i.value.defaultCurrent=1,i.value.current=1,m(l.value)},L=async()=>{await se().then(e=>{e.code===200?T.value=e.data:B.error(e.message)}).catch(e=>{console.log(e)})},m=async e=>{x.value=!0,await te(e).then(f=>{f.code===200&&(A.value=f.data.list,i.value.total=Number(f.data.total),x.value=!1,c.value=!1)}).catch(f=>{console.log(f)})},s=()=>{d.value=!1,g.value=!1,u.value=!1},b=()=>{D.push("/service/ServiceList/addService")},U=(e,f)=>{u.value=!0,t.value.id=e.id,f!==2?(p.value="\u786E\u8BA4\u542F\u7528",S.value="\u786E\u5B9A\u542F\u7528\u8BE5\u670D\u52A1\u5417\uFF1F",t.value.flag=2):(p.value="\u786E\u8BA4\u7981\u7528",S.value="\u786E\u5B9A\u7981\u7528\u8BE5\u670D\u52A1\u5417\uFF1F",t.value.flag=1)},O=async()=>{t.value.flag===2?await ae(t.value.id).then(e=>{e.data.code===200?(u.value=!1,B.success("\u64CD\u4F5C\u6210\u529F"),m(l.value)):(B.error(e.data.msg),u.value=!1)}).catch(e=>{console.log(e)}):await le(t.value.id).then(e=>{e.data.code===200?(u.value=!1,B.success("\u64CD\u4F5C\u6210\u529F"),m(l.value)):(B.error(e.data.msg),u.value=!1)}).catch(e=>{console.log(e)})},M=async()=>{await ue(E.value).then(e=>{e.code===200?(g.value=!1,B.success("\u5220\u9664\u6210\u529F"),m(l.value)):(B.error(e.msg),u.value=!1)})},G=e=>{E.value=e.id,g.value=!0},X=e=>{ne.exports.forEach(e,f=>{f.sortBy==="sortNum"?f.descending===!0?l.value.isAsc1=!1:l.value.isAsc1=!0:f.descending===!0?l.value.isAsc2=!1:l.value.isAsc2=!0}),m(l.value)},Y=e=>{l.value.pageNo=e.defaultCurrent,l.value.pageSize=e.defaultPageSize,m(l.value)};return q(()=>{i.value.defaultCurrent=1,i.value.current=1,i.value.defaultPageSize=10,h.value=o.path,o.path==="/service/ServiceList"?!_.value&&o.query.id?(L(),_.value=o.query.id,l.value.serveTypeId=_.value,D.replace({path:o.path,query:{}}),m(l.value)):_.value||(L(),m(z.value)):m(z.value)}),H(()=>o.query,()=>{c.value===!1&&m(l.value)}),(e,f)=>{const Z=C("router-view");return h.value!=="/service/ServiceList"?(I(),ee(Z,{key:0})):(I(),N("div",Ie,[F(" \u641C\u7D22\u8868\u5355\u533A\u57DF "),n(ke,{initSearch:_.value,typeSelect:T.value,onHandleSearch:k,onHandleReset:P},null,8,["initSearch","typeSelect"]),F(" end "),F(" \u8868\u683C "),n(we,{"list-data":A.value,pagination:i.value,onHandleSetupContract:U,onHandleBuild:b,onHandleClickDelete:G,onFetchData:m,onOnPageChange:Y,onHandleSortChange:X},null,8,["list-data","pagination"]),F(" end "),F(" \u5220\u9664\u5F39\u7A97 "),n(re,{"dialog-delete-visible":g.value,"delete-text":w.value,onHandleDelete:M,onHandleClose:s},null,8,["dialog-delete-visible","delete-text"]),F(" end "),F(" \u542F\u7528/\u7981\u7528\u5F39\u7A97 "),n(de,{title:p.value,"dialog-confirm-visible":u.value,"confirm-text":S.value,onHandleConfirm:O,onHandleClose:s},null,8,["title","dialog-confirm-visible","confirm-text"]),F(" end ")]))}}});var Re=j(ze,[["__scopeId","data-v-d7db376c"],["__file","D:/Workspace/front/jz/project-xzb-pc-admin-vue3-java/src/pages/service/service/index.vue"]]);export{Re as default};
