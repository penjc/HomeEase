import{_ as L,d as T,a as l,A as w,b as Z,e as y,o as x,h as P,k as u,g as D,i,w as _,n as $,v as A,E as H,f as V,p as ee,j as te,c as ae,G as ue,F as le,M as K}from"./index.ea7872bb.js";import{g as se,d as ne,a as oe,b as ie}from"./coupon.f294709a.js";import{d as z}from"./dayjs.min.86ec729c.js";import{N as ce}from"./index.9e60eedd.js";import{c as de}from"./caret-down-small.e2efd16d.js";import{D as re}from"./index.5f69b05a.js";import{C as pe,G as ve}from"./index.8ec4d4b4.js";const _e=[{title:"\u6D3B\u52A8\u7F16\u53F7",align:"left",width:200,minWidth:"200px",colKey:"id"},{title:"\u6D3B\u52A8\u540D\u79F0",width:180,minWidth:"180px",colKey:"name"},{title:"\u4F18\u60E0\u5238\u7C7B\u578B",minWidth:"180px",colKey:"type",sortType:"all",cell:(t,{row:e})=>t("span",{1:{label:"\u6EE1\u51CF"},2:{label:"\u6298\u6263"}}[e.type].label)},{title:"\u6EE1\u989D\u9650\u5236\uFF08\u5143\uFF09",colKey:"amountCondition",width:150,minWidth:"150px",cell:(t,{row:e})=>t("span",e.amountCondition===0?"\u65E0\u95E8\u69DB":e.amountCondition)},{title:"\u6298\u6263\u91D1\u989D\uFF08\u5143\uFF09/\u6BD4\u4F8B",colKey:"discountRate",width:200,minWidth:"288px",cell:(t,{row:e})=>t("span",e.type===1?e.discountAmount+"\u5143":e.discountRate+"%")},{title:"\u4F7F\u7528\u8303\u56F4",colKey:"serveAddress",width:130,minWidth:"130px",cell:(t,{row:e})=>t("span","\u5168\u573A\u901A\u7528")},{title:"\u9002\u7528\u5BF9\u8C61",colKey:"serveAddress",width:130,minWidth:"130px",cell:t=>t("span","\u5168\u90E8\u7528\u6237")},{title:"\u53D1\u653E\u65F6\u95F4",minWidth:"320px",colKey:"distributeStartTime",sortType:"all",cell:(t,{row:e})=>t("span",z(e.distributeStartTime).format(" YYYY-MM-DD HH:mm")+" ~ "+z(e.distributeEndTime).format(" YYYY-MM-DD HH:mm"))},{title:"\u4F7F\u7528\u671F\u9650\uFF08\u5929\uFF09",colKey:"validityDays",width:150,minWidth:"150px"},{title:"\u53D1\u653E\u6570\u91CF\uFF08\u5F20\uFF09",colKey:"totalNum",width:150,minWidth:"150px",cell:(t,{row:e})=>t("span",e.totalNum===0?"\u65E0\u9650\u5236":e.totalNum)},{title:"\u6BCF\u4EBA\u9650\u9886\uFF08\u5F20\uFF09",colKey:"serveAddress",width:150,minWidth:"150px",cell:t=>t("span",1)},{title:"\u53D1\u653E\u72B6\u6001",colKey:"status",width:120,minWidth:"120px",cell:(t,{row:e})=>{const a={2:{label:"\u8FDB\u884C\u4E2D"},3:{label:"\u5DF2\u5931\u6548"},1:{label:"\u5F85\u751F\u6548"},4:{label:"\u4F5C\u5E9F"}};return t("span",{class:`status-dot status-dot-${e.status===3||e.status===4?1:e.status===1?0:2}`},a[e.status].label)}},{title:"\u521B\u5EFA\u65F6\u95F4",minWidth:"180px",colKey:"createTime",sortType:"all",cell:(t,{row:e})=>t("span",e.createTime?z(e.createTime).format("YYYY-MM-DD HH:mm"):"-")},{align:"left",fixed:"right",width:190,minWidth:"190px",colKey:"op",title:"\u64CD\u4F5C"}],me=[{title:"\u7528\u6237\u624B\u673A\u53F7",align:"left",width:147,minWidth:"147px",colKey:"userPhone",cell:(t,{row:e})=>t("span",e.userPhone||"-")},{title:"\u9886\u53D6\u65F6\u95F4",minWidth:"180px",colKey:"createTime",sortType:"all",cell:(t,{row:e})=>t("span",e.createTime?z(e.createTime).format("YYYY-MM-DD HH:mm"):"-")},{title:"\u4F7F\u7528\u65F6\u95F4",minWidth:"184px",width:184,colKey:"useTime",sortType:"all",cell:(t,{row:e})=>t("span",e.useTime?z(e.useTime).format("YYYY-MM-DD HH:mm"):"-")},{title:"\u4F18\u60E0\u5238\u72B6\u6001",colKey:"status",minWidth:"104px",cell:(t,{row:e})=>{const a={1:{label:"\u5F85\u4F7F\u7528"},2:{label:"\u5DF2\u4F7F\u7528"},3:{label:"\u5DF2\u8FC7\u671F"},4:{label:"\u4F5C\u5E9F"}};return t("span",{class:`status-dot status-dot-${e.status===3||e.status===4?1:e.status===1?0:2}`},a[e.status].label)}},{title:"\u4F7F\u7528\u8BA2\u5355",minWidth:"180px",width:180,colKey:"ordersId",sortType:"all",cell:(t,{row:e})=>t("span",e.ordersId||"-")}];const ge={class:"baseList bg-wt min-h"},he={class:"tableBoxs"},Fe={class:"newBox"},fe=["onClick"],Ce=["onClick"],be=["onClick"],De={class:"description"},ye={key:0,class:"hover"},Se={name:"ListBase"},Be=T({...Se,props:{listData:{type:Object,default:()=>({})},pagination:{type:Object,default:()=>({})},DialogFormData:{type:Object,default:()=>({})},AssignPagination:{type:Object,default:()=>({})},activeStatus:{type:Number,default:0}},emits:["handleBuild","handleClickCancel","handleSortChange","onPageChange","handleClickAssign"],setup(t,{emit:e}){const a=t,m=l("auto");w(a,()=>{b.value=!1,a.activeStatus==1?(h.value=me,g.value=a.DialogFormData,s.value=a.AssignPagination,s.value.current=a.AssignPagination.defaultCurrent==1?1:a.AssignPagination.defaultCurrent,s.value.pageSize=a.AssignPagination.defaultPageSize==1?1:a.AssignPagination.defaultPageSize,m.value="335"):(h.value=_e,g.value=a.listData,s.value=a.pagination,s.value.current=a.pagination.defaultCurrent==1?1:a.pagination.defaultCurrent,s.value.pageSize=a.pagination.defaultPageSize==1?1:a.pagination.defaultPageSize,m.value="auto")});const h=l([]),C=l("id"),F=Z(),o=l([{sortBy:"updateTime"}]),f=l({table:{sortIcon:c=>c&&c(de)}}),g=l([]),s=l({defaultPageSize:10,total:0,defaultCurrent:1}),b=l(!0),B=c=>{o.value=c,e("handleSortChange",c)},E=c=>{F.push("/coupon/couponList/editCoupon/"+c.id)},d=c=>{e("handleClickCancel",c)},N=c=>{e("handleClickAssign",c)},v=c=>{s.value.defaultCurrent=c.current,s.value.defaultPageSize=c.pageSize,e("onPageChange",{defaultCurrent:c.current,defaultPageSize:c.pageSize})},W=()=>{F.push("/coupon/couponList/addCoupon")};return(c,j)=>{const O=y("t-table"),Y=y("t-config-provider");return x(),P("div",ge,[u("div",he,[u("div",Fe,[t.activeStatus!==1?(x(),P("button",{key:0,class:"bt newBoxbutton",onClick:W},"\u65B0\u589E\u4F18\u60E0\u5238")):D("v-if",!0)]),i(Y,{"global-config":f.value},{default:_(()=>[i(O,{data:g.value,columns:h.value,"row-key":C.value,"vertical-align":"middle",hover:!0,pagination:s.value.total<=10||!s.value.total?null:s.value,"select-on-row-click":"","disable-data-page":s.value.total<=10,loading:b.value,sort:o.value,maxHeight:m.value,showSizeChanger:"","hide-sort-tips":!0,"show-sort-column-bg-color":!0,"table-layout":"fixed","multiple-sort":!0,"table-content-width":"100%",onPageChange:v,onSortChange:B},{empty:_(()=>[i(ce,{PhotoMt:a.activeStatus==1?0:60,PhotoMb:a.activeStatus==1?0:30,pMb:a.activeStatus==1?50:75,content:"\u6682\u65E0\u9886\u53D6\u8BB0\u5F55\u54E6~"},null,8,["PhotoMt","PhotoMb","pMb"])]),op:_(({row:r})=>[u("a",{class:$(r.status===3||r.status===4?"text-forbidden font-bt btn-split-right":"font-bt btn-split-right"),onClick:k=>d(r)},"\u64A4\u9500",10,fe),u("a",{class:$(r.status!==1?"text-forbidden font-bt line":"font-bt line"),onClick:k=>E(r)},"\u7F16\u8F91",10,Ce),u("a",{class:"font-bt btn-split-left",onClick:k=>N(r)},"\u9886\u53D6\u8BB0\u5F55",8,be)]),serveAddress:_(({row:r})=>[u("div",De,[u("span",null,A(r.serveAddress),1),r.serveAddress.length>36?(x(),P("span",ye,A(r.serveAddress),1)):D("v-if",!0)])]),_:1},8,["data","columns","row-key","pagination","disable-data-page","loading","sort","maxHeight"])]),_:1},8,["global-config"])])])}}});var I=L(Be,[["__scopeId","data-v-799977ce"],["__file","D:/Workspace/front/jz/project-xzb-pc-admin-vue3-java/src/pages/coupon/couponList/components/TableList.vue"]]);const xe={class:"formBox bg-wt"},Ee=T({__name:"SearchForm",emits:["handleSearch"],setup(t,{emit:e}){const a=l({id:null,name:null,type:null,status:null}),m={id:null,name:null,type:null,status:null},h=()=>{a.value={...m},e("handleSearch",a.value)},C=()=>{e("handleSearch",a.value)};return(F,o)=>{const f=y("t-input"),g=y("t-form-item"),s=y("t-col"),b=y("t-select"),B=y("t-row"),E=y("t-form");return x(),P("div",xe,[i(E,{ref:"form",data:a.value,"label-width":70},{default:_(()=>[i(B,null,{default:_(()=>[i(s,null,{default:_(()=>[i(g,{label:"\u6D3B\u52A8\u7F16\u53F7\uFF1A",name:"id"},{default:_(()=>[i(f,{modelValue:a.value.id,"onUpdate:modelValue":o[0]||(o[0]=d=>a.value.id=d),class:"form-item-content",type:"search",placeholder:"\u8BF7\u8F93\u5165",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),i(s,null,{default:_(()=>[i(g,{label:"\u6D3B\u52A8\u540D\u79F0\uFF1A",name:"name"},{default:_(()=>[i(f,{modelValue:a.value.name,"onUpdate:modelValue":o[1]||(o[1]=d=>a.value.name=d),class:"form-item-content",type:"search",placeholder:"\u8BF7\u8F93\u5165",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),i(s,null,{default:_(()=>[i(g,{label:"\u4F18\u60E0\u5238\u7C7B\u578B\uFF1A",name:"name","label-width":84},{default:_(()=>[i(b,{modelValue:a.value.type,"onUpdate:modelValue":o[2]||(o[2]=d=>a.value.type=d),class:"form-item-content",options:H(pe),placeholder:"\u8BF7\u9009\u62E9",clearable:""},null,8,["modelValue","options"])]),_:1})]),_:1}),i(s,null,{default:_(()=>[i(g,{label:"\u53D1\u653E\u72B6\u6001\uFF1A",name:"name"},{default:_(()=>[i(b,{modelValue:a.value.status,"onUpdate:modelValue":o[3]||(o[3]=d=>a.value.status=d),class:"form-item-content",options:H(ve),placeholder:"\u8BF7\u9009\u62E9",clearable:""},null,8,["modelValue","options"])]),_:1})]),_:1}),i(s,{class:"searchBtn"},{default:_(()=>[u("button",{class:"bt-grey wt-60",onClick:o[4]||(o[4]=d=>h())},"\u91CD\u7F6E"),u("button",{class:"bt wt-60",onClick:o[5]||(o[5]=d=>C())},"\u641C\u7D22")]),_:1})]),_:1})]),_:1},8,["data"])])}}});var Ae=L(Ee,[["__scopeId","data-v-3882afcf"],["__file","D:/Workspace/front/jz/project-xzb-pc-admin-vue3-java/src/pages/coupon/couponList/components/SearchForm.vue"]]);const S=t=>(ee("data-v-6e9f97fa"),t=t(),te(),t),Pe={class:"statistics"},ke={class:"card"},ze={class:"body"},Ne={class:"num"},we=S(()=>u("div",{class:"title"},"\u53D1\u653E\u6570\u91CF\uFF08\u5F20\uFF09",-1)),Le=S(()=>u("div",{class:"line"},null,-1)),Te={class:"card"},We={class:"body"},je={class:"num"},Oe=S(()=>u("div",{class:"title"},"\u9886\u53D6\u6570\u91CF\uFF08\u5F20\uFF09",-1)),Ye=S(()=>u("div",{class:"line"},null,-1)),Ke={class:"card"},Me={class:"body"},$e={class:"num"},He=S(()=>u("div",{class:"title"},"\u4F7F\u7528\u6570\u91CF\uFF08\u5F20\uFF09",-1)),Ve=S(()=>u("div",{class:"line"},null,-1)),Ie={class:"card"},Re={class:"body"},Ue={class:"num"},Je=S(()=>u("div",{class:"title"},"\u53D1\u653E\u7387",-1)),qe=S(()=>u("div",{class:"line"},null,-1)),Ge={class:"card"},Qe={class:"body"},Xe={class:"num"},Ze=S(()=>u("div",{class:"title"},"\u4F7F\u7528\u7387",-1)),et=S(()=>u("div",{class:"line"},null,-1)),tt={class:"tableBox"},at=T({__name:"assignDialog",props:{visible:{type:Boolean,default:!1},data:{type:Object,default:()=>({})},title:{type:String,default:"\u65B0\u5EFA\u4EA7\u54C1"},pagination:{type:Object,default:()=>({})},receiveData:{type:Object,default:()=>({})}},emits:["handleClose","onPageChange"],setup(t,{expose:e,emit:a}){const m=t,h=l([]),C=l(!1),F=l(),o=l(),f=()=>{C.value=!1,a("handleClose")};w(()=>m.visible,()=>{C.value=m.visible,F.value=m.title}),w(()=>m.data,s=>{h.value=JSON.parse(JSON.stringify(s)),!o.value&&(o.value=JSON.parse(JSON.stringify(m.pagination)))});const g=s=>{o.value.defaultCurrent=s.defaultCurrent,o.value.defaultPageSize=s.defaultPageSize,a("onPageChange",s)};return e({onClickCloseBtn:f}),(s,b)=>{const B=y("t-dialog");return x(),V(B,{visible:C.value,"onUpdate:visible":b[0]||(b[0]=E=>C.value=E),header:F.value,width:920,footer:!1,top:"10vh","on-close":f},{body:_(()=>[u("div",Pe,[u("div",ke,[u("div",ze,[u("div",Ne,A(t.receiveData.totalNum),1),we]),Le]),u("div",Te,[u("div",We,[u("div",je,A(t.receiveData.receiveNum),1),Oe]),Ye]),u("div",Ke,[u("div",Me,[u("div",$e,A(t.receiveData.writeOffNum),1),He]),Ve]),u("div",Ie,[u("div",Re,[u("div",Ue,A((t.receiveData.receiveNum/t.receiveData.totalNum*100).toFixed(1))+"% ",1),Je]),qe]),u("div",Ge,[u("div",Qe,[u("div",Xe,A((t.receiveData.writeOffNum/t.receiveData.totalNum*100).toFixed(1))+"% ",1),Ze]),et])]),u("div",tt,[i(I,{DialogFormData:h.value,AssignPagination:o.value,onOnPageChange:g,activeStatus:1},null,8,["DialogFormData","AssignPagination"])])]),_:1},8,["visible","header"])}}});var ut=L(at,[["__scopeId","data-v-6e9f97fa"],["__file","D:/Workspace/front/jz/project-xzb-pc-admin-vue3-java/src/pages/coupon/couponList/components/assignDialog.vue"]]);const lt={key:1,class:"base-up-wapper bgTable min-h"},st=T({__name:"index",setup(t){const e=l(""),a=l(!1),m=l(!1),h=l([]),C=l(""),F=l(!1),o=l({}),f=l("\u65B0\u5EFA"),g=ae(),s=l(),b=l([]),B=l(""),E=l([]),d=l({defaultPageSize:10,total:0,defaultCurrent:1}),N=l({defaultPageSize:10,total:0,defaultCurrent:1}),v=l({id:null,name:null,status:null,type:null,pageNo:1,pageSize:10}),W=l({id:null,name:null,status:null,type:null,pageNo:1,pageSize:10}),c=l({activityId:null,pageNo:1,pageSize:10}),j=l();w(()=>g.query,()=>{d.value.defaultCurrent=1,d.value.defaultPageSize=10,r(v.value)});const O=n=>{v.value.id=n.id,v.value.name=n.name,v.value.status=n.status,v.value.type=n.type,v.value.pageNo=1,v.value.pageSize=10,d.value.defaultCurrent=1,d.value.defaultPageSize=10,r(v.value)},Y=()=>{d.value.defaultCurrent=1,r(v.value)},r=async n=>{F.value=!0,await se(n).then(p=>{p.code===200&&(h.value=p.data.list,d.value.total=Number(p.data.total),F.value=!1)}).catch(p=>{console.log(p)})},k=async n=>{F.value=!0,await oe(n).then(p=>{p.code===200&&(o.value=p.data.list,N.value.total=Number(p.data.total),F.value=!1)}).catch(p=>{console.log(p)})},R=async n=>{await ie(n).then(p=>{p.code===200?j.value=p.data:K.error(p.msg)}).catch(p=>{console.log(p)})},M=()=>{a.value=!1,m.value=!1},U=n=>{a.value=!0,B.value=n.id,f.value="\u8BF7\u586B\u5199\u53D6\u6D88\u539F\u56E0",C.value="\u53D6\u6D88\u539F\u56E0\uFF1A"},J=async()=>{await ne(B.value).then(n=>{n.code===200?(K.success("\u64A4\u9500\u6210\u529F"),a.value=!1,r(v.value)):K.error(n.data.msg)}).catch(n=>{console.log(n)})},q=n=>{v.value.pageNo=n.defaultCurrent,v.value.pageSize=n.defaultPageSize,r(v.value)},G=n=>{c.value.pageNo=n.defaultCurrent,c.value.pageSize=n.defaultPageSize,k(v.value)},Q=n=>{m.value=!0,f.value="\u9886\u53D6\u8BB0\u5F55",c.value.activityId=n.id,R(n.id),k(c.value)};return ue(()=>{e.value=g.path,r(W.value)}),(n,p)=>{const X=y("router-view");return x(),P(le,null,[D(" \u65B0\u589E\u7F16\u8F91\u4F18\u60E0\u5238\u9875router "),e.value!=="/coupon/couponList"?(x(),V(X,{key:0})):(x(),P("div",lt,[D(" \u641C\u7D22\u8868\u5355\u533A\u57DF "),i(Ae,{initSearch:s.value,typeSelect:b.value,cityList:E.value,onHandleSearch:O,onHandleReset:Y},null,8,["initSearch","typeSelect","cityList"]),D(" end "),D(" \u8868\u683C "),i(I,{"list-data":h.value,pagination:d.value,activeStatus:0,onHandleClickAssign:Q,onHandleClickCancel:U,onOnPageChange:q},null,8,["list-data","pagination"]),D(" end ")])),D(" \u64A4\u9500\u4F18\u60E0\u5238 "),i(re,{title:"\u786E\u8BA4\u64A4\u9500","dialog-delete-visible":a.value,"delete-text":"\u6B64\u64CD\u4F5C\u5C06\u7ED3\u675F\u53D1\u653E\u4F18\u60E0\u5238\uFF0C\u672A\u4F7F\u7528\u7684\u4F18\u60E0\u5238\u5C06\u4F5C\u5E9F\uFF0C\u7528\u6237\u5C06\u65E0\u6CD5\u4F7F\u7528\u8BE5\u4F18\u60E0\u5238",onHandleDelete:J,onHandleClose:M},null,8,["dialog-delete-visible"]),D(" end "),D(" \u6307\u6D3E\u5F39\u7A97 "),i(ut,{visible:m.value,title:f.value,pagination:N.value,receiveData:j.value,data:o.value,onOnPageChange:G,onHandleClose:M,onFetchData:r},null,8,["visible","title","pagination","receiveData","data"])],64)}}});var vt=L(st,[["__scopeId","data-v-761a1adc"],["__file","D:/Workspace/front/jz/project-xzb-pc-admin-vue3-java/src/pages/coupon/couponList/index.vue"]]);export{vt as default};
