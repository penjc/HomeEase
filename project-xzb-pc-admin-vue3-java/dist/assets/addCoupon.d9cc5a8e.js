import{_ as k,d as w,c as R,b as q,a as B,m as I,A as M,e as m,h as U,k as a,i as t,w as l,M as c,o as _,C as y,f as D,g as C,p as S,j}from"./index.ea7872bb.js";import{e as L,h as z}from"./validate.9eb11d57.js";import{b as P,s as W}from"./coupon.f294709a.js";const p=v=>(S("data-v-72ce36b1"),v=v(),j(),v),G={class:"contentBox"},H={class:"bodybox bgTable"},J={class:"bodyBox"},K={class:"box bg-wt"},O=p(()=>a("div",{class:"title"},"\u57FA\u672C\u4FE1\u606F",-1)),Q={class:"cardBox"},X={class:"left"},Y={class:"right"},Z={class:"box bg-wt"},$=p(()=>a("div",{class:"title"},"\u53D1\u653E\u89C4\u5219",-1)),ee={class:"cardBox mb-0"},ue={class:"left"},te={class:"right"},ae=p(()=>a("span",{class:"bt bt-grey"},"\u8FD4\u56DE",-1)),oe=[ae],le=p(()=>a("button",{class:"bt updateInfo"},"\u63D0\u4EA4",-1)),se=w({__name:"addCoupon",setup(v){const b=R(),f=q(),{id:s}=b.params,e=B({discountRate:null,discountAmount:null,amountCondition:null,type:1,name:"",distributeTime:[],validityDays:null,totalNum:null,id:s||null}),n=B({discountRate:null,discountAmount:null,amountCondition:null,type:1,name:"",distributeEndTime:null,distributeStartTime:null,validityDays:null,totalNum:null,id:s||null}),F=async d=>{await P(d).then(u=>{u.code===200?(e.value=u.data,e.value.amountCondition=parseInt(u.data.amountCondition),e.value.discountAmount=parseInt(u.data.discountAmount),e.value.distributeTime=[u.data.distributeStartTime,u.data.distributeEndTime]):c.error(u.msg)}).catch(u=>{console.log(u)})},h=d=>{d.validateResult===!0?(n.value.discountRate=e.value.discountRate,n.value.discountAmount=e.value.discountAmount,n.value.amountCondition=e.value.amountCondition,n.value.type=e.value.type,n.value.name=e.value.name,n.value.distributeEndTime=e.value.distributeTime[1],n.value.distributeStartTime=e.value.distributeTime[0],n.value.validityDays=e.value.validityDays,n.value.totalNum=e.value.totalNum,V(n.value)):c.error("\u8BF7\u68C0\u67E5\u8F93\u5165\u9879")},V=async d=>{await W(d).then(u=>{u.code===200?s?(c.success("\u66F4\u65B0\u6210\u529F"),F(s)):(c.success("\u521B\u5EFA\u6210\u529F"),f.push("/coupon/couponList")):c.error(u.data.msg)}).catch(u=>{console.log(u)})},E={name:[{required:!0,message:"\u8BF7\u8F93\u5165\u6D3B\u52A8\u540D\u79F0",trigger:"blur"}],amountCondition:[{required:!0,message:"\u8BF7\u8F93\u5165\u6EE1\u989D\u9650\u5236",trigger:"blur"}],discountAmount:[{required:!0,message:"\u8BF7\u8F93\u5165\u62B5\u6263\u91D1\u989D",trigger:"blur"}],discountRate:[{required:!0,message:"\u8BF7\u8F93\u5165\u6298\u6263\u7387",trigger:"blur"},{validator:L,trigger:"blur",message:"\u8BF7\u8F93\u51651-100\u4E4B\u95F4\u6574\u6570"}],distributeTime:[{required:!0,message:"\u8BF7\u9009\u62E9\u53D1\u653E\u65F6\u95F4",trigger:"change"}],validityDays:[{required:!0,message:"\u8BF7\u8F93\u5165\u4F7F\u7528\u671F\u9650",trigger:"blur"},{validator:z,trigger:"blur",message:"\u8BF7\u8F93\u51651-1440\u4E4B\u95F4\u6574\u6570"}],totalNum:[{required:!0,message:"\u8BF7\u8F93\u5165\u53D1\u653E\u6570\u91CF",trigger:"blur"}]},A=()=>{f.push("/coupon/couponList")};return I(()=>{s&&F(s)}),M(()=>b.query,()=>{s&&F(s)}),(d,u)=>{const r=m("t-input"),i=m("t-form-item"),g=m("t-radio"),x=m("t-radio-group"),T=m("t-date-range-picker"),N=m("t-form");return _(),U("div",G,[a("div",H,[a("div",J,[t(N,{ref:"form",rules:E,data:e.value,onSubmit:h,"label-width":96},{default:l(()=>[a("div",K,[O,a("div",Q,[a("div",X,[t(i,{name:"name",label:"\u6D3B\u52A8\u540D\u79F0\uFF1A"},{default:l(()=>[t(r,{class:"form-item-content",modelValue:e.value.name,"onUpdate:modelValue":u[0]||(u[0]=o=>e.value.name=o),placeholder:"\u8BF7\u8F93\u5165",maxlength:20,"show-limit-number":"",clearable:""},null,8,["modelValue"])]),_:1}),t(i,{name:"amountCondition",label:"\u6EE1\u989D\u9650\u5236\uFF1A"},{default:l(()=>[t(r,{class:"form-item-content",modelValue:e.value.amountCondition,"onUpdate:modelValue":u[1]||(u[1]=o=>e.value.amountCondition=o),modelModifiers:{number:!0},placeholder:"\u8BF7\u8F93\u5165",suffix:"\u5143",clearable:""},null,8,["modelValue"])]),_:1})]),a("div",Y,[t(i,{name:"type",label:"\u4F18\u60E0\u5238\u7C7B\u578B\uFF1A"},{default:l(()=>[t(x,{modelValue:e.value.type,"onUpdate:modelValue":u[2]||(u[2]=o=>e.value.type=o)},{default:l(()=>[t(g,{value:1},{default:l(()=>[y("\u6EE1\u51CF")]),_:1}),t(g,{value:2},{default:l(()=>[y("\u6298\u6263")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e.value.type===1?(_(),D(i,{key:0,name:"discountAmount",label:"\u62B5\u6263\u91D1\u989D\uFF1A"},{default:l(()=>[t(r,{class:"form-item-content",modelValue:e.value.discountAmount,"onUpdate:modelValue":u[3]||(u[3]=o=>e.value.discountAmount=o),modelModifiers:{number:!0},placeholder:"\u8BF7\u8F93\u5165",suffix:"\u5143",clearable:""},null,8,["modelValue"])]),_:1})):C("v-if",!0),e.value.type===2?(_(),D(i,{key:1,name:"discountRate",label:"\u62B5\u6263\u6BD4\u4F8B\uFF1A"},{default:l(()=>[t(r,{class:"form-item-content",modelValue:e.value.discountRate,"onUpdate:modelValue":u[4]||(u[4]=o=>e.value.discountRate=o),modelModifiers:{number:!0},placeholder:"\u8BF7\u8F93\u5165",suffix:"%",clearable:""},null,8,["modelValue"])]),_:1})):C("v-if",!0)])])]),a("div",Z,[$,a("div",ee,[a("div",ue,[t(i,{name:"distributeTime",label:"\u53D1\u653E\u65F6\u95F4\uFF1A"},{default:l(()=>[t(T,{modelValue:e.value.distributeTime,"onUpdate:modelValue":u[5]||(u[5]=o=>e.value.distributeTime=o),placeholder:"\u65E5\u671F",clearable:"","enable-time-picker":""},null,8,["modelValue"])]),_:1}),t(i,{name:"totalNum",label:"\u53D1\u653E\u6570\u91CF\uFF1A"},{default:l(()=>[t(r,{class:"form-item-content",placeholder:"\u8BF7\u8F93\u5165",suffix:"\u5F20",modelValue:e.value.totalNum,"onUpdate:modelValue":u[6]||(u[6]=o=>e.value.totalNum=o),modelModifiers:{number:!0},clearable:""},null,8,["modelValue"])]),_:1})]),a("div",te,[t(i,{name:"validityDays",label:"\u4F7F\u7528\u671F\u9650\uFF1A"},{default:l(()=>[t(r,{class:"form-item-content",placeholder:"\u8BF7\u8F93\u5165",suffix:"\u65E5\u5185\u6709\u6548",modelValue:e.value.validityDays,"onUpdate:modelValue":u[7]||(u[7]=o=>e.value.validityDays=o),modelModifiers:{number:!0},clearable:""},null,8,["modelValue"])]),_:1})])])]),a("div",{class:"footBox bg-wt"},[a("div",{class:"updateInfo",onClick:A},oe),le])]),_:1},8,["data"])])])])}}});var re=k(se,[["__scopeId","data-v-72ce36b1"],["__file","D:/Workspace/front/jz/project-xzb-pc-admin-vue3-java/src/pages/coupon/couponList/addCoupon.vue"]]);export{re as default};
