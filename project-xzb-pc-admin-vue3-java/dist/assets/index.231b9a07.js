import{_ as $,d as j,a as u,A as I,e as E,o as z,f as K,w as _,g as x,i as v,k as r,p as q,j as M,b as J,h as H,E as V,v as R,n as G,c as Q,G as X,a2 as Y,M as p,a3 as Z,a4 as ee,a5 as te,a6 as ae,a7 as ue,a8 as le}from"./index.ea7872bb.js";import{c as oe}from"./city.4c26a237.js";import{c as W,d as ne}from"./validate.9eb11d57.js";import{N as se}from"./index.9e60eedd.js";import{f as ie}from"./date.c3b55e74.js";import{c as ce}from"./caret-down-small.e2efd16d.js";import{D as re}from"./index.5f69b05a.js";import"./dayjs.min.86ec729c.js";const O=F=>(q("data-v-6918d8b0"),F=F(),M(),F),de=O(()=>r("span",null,"\u53D6\u6D88",-1)),ve=[de],me=O(()=>r("button",{theme:"primary",type:"submit",class:"bt btn-submit"},[r("span",null,"\u4FDD\u5B58")],-1)),ge=j({__name:"DialogForm",props:{visible:{type:Boolean,default:!1},formData:{type:Object,default:()=>({})},edit:{type:Boolean,default:!1},title:{type:String,default:"\u65B0\u5EFA\u4EA7\u54C1"},cityList:{type:Array,default:()=>[]}},emits:["handleClose","confirmEdit"],setup(F,{expose:s,emit:m}){const f=F,C=u("empty"),d=u(),n=u(!1),l=u({cityCode:"",name:"",managerPhone:"",managerName:""}),S=u([]),b=u(),D=h=>{h.validateResult===!0&&m("confirmEdit",l.value)},B=()=>{d.value.reset(),n.value=!1,m("handleClose")},A=(h,o)=>{l.value.cityCode=h,l.value.name=o.node.label};I(()=>f.visible,()=>{f.edit?l.value=JSON.parse(JSON.stringify(f.formData)):d.value.reset(),n.value=f.visible,b.value=f.title,S.value=f.cityList});const i={cityCode:[{required:!0,message:"\u8BF7\u9009\u62E9\u533A\u57DF",type:"error",trigger:"change"}],managerPhone:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7",type:"error",trigger:"blur"},{validator:W,message:"\u8BF7\u8F93\u5165\u6B63\u786E\u683C\u5F0F\u7684\u624B\u673A\u53F7",type:"error",trigger:"change"},{validator:W,message:"\u8BF7\u8F93\u5165\u6B63\u786E\u683C\u5F0F\u7684\u624B\u673A\u53F7",type:"error",trigger:"blur"}],managerName:[{required:!0,message:"\u8BF7\u8F93\u5165\u59D3\u540D",type:"error",trigger:"blur"},{validator:ne,message:"\u8BF7\u8F93\u5165\u81F3\u5C112\u4E2A\u5B57\u7B26,\u81F3\u591A10\u4E2A\u5B57\u7B26",type:"error",trigger:"blur"}]};return s({onClickCloseBtn:B}),(h,o)=>{const g=E("t-cascader"),y=E("t-form-item"),w=E("t-input"),P=E("t-form"),N=E("t-dialog");return z(),K(N,{visible:n.value,"onUpdate:visible":o[4]||(o[4]=t=>n.value=t),header:b.value,width:628,footer:!1,"on-close":B},{body:_(()=>[x(" \u8868\u5355\u5185\u5BB9 "),v(P,{ref_key:"form",ref:d,data:l.value,rules:i,"on-cancel":"onClickCloseBtn","reset-type":C.value,onSubmit:D},{default:_(()=>[v(y,{label:"\u5730\u533A\u9009\u62E9\uFF1A",name:"cityCode"},{default:_(()=>[v(g,{modelValue:l.value.cityCode,"onUpdate:modelValue":o[0]||(o[0]=t=>l.value.cityCode=t),class:"form-item-content wt-400",placeholder:"\u8BF7\u9009\u62E9",disabled:F.edit,style:{minWidth:"134px"},clearable:"",onChange:o[1]||(o[1]=(t,k)=>A(t,k)),options:S.value},null,8,["modelValue","disabled","options"])]),_:1}),v(y,{label:"\u533A\u57DF\u8D1F\u8D23\u4EBA\uFF1A",name:"managerName"},{default:_(()=>[v(w,{modelValue:l.value.managerName,"onUpdate:modelValue":o[2]||(o[2]=t=>l.value.managerName=t),class:"wt-400",placeholder:"\u8BF7\u8F93\u5165",clearable:""},null,8,["modelValue"])]),_:1}),v(y,{label:"\u624B\u673A\u53F7\u7801\uFF1A",name:"managerPhone"},{default:_(()=>[v(w,{modelValue:l.value.managerPhone,"onUpdate:modelValue":o[3]||(o[3]=t=>l.value.managerPhone=t),class:"wt-400",placeholder:"\u8BF7\u8F93\u5165",clearable:""},null,8,["modelValue"])]),_:1}),v(y,{style:{float:"right"}},{default:_(()=>[r("div",{class:"bt bt-grey btn-submit",onClick:B},ve),me]),_:1})]),_:1},8,["data","reset-type"])]),_:1},8,["visible","header"])}}});var pe=$(ge,[["__scopeId","data-v-6918d8b0"],["__file","D:/Workspace/front/jz/project-xzb-pc-admin-vue3-java/src/pages/service/region/components/DialogForm.vue"]]);const fe=[{title:"\u533A\u57DF\u7F16\u53F7",align:"left",width:200,minWidth:"70px",colKey:"cityCode"},{title:"\u533A\u57DF\u540D\u79F0",width:150,minWidth:"150px",colKey:"name"},{title:"\u533A\u57DF\u8D1F\u8D23\u4EBA",width:150,minWidth:"150px",colKey:"managerName"},{title:"\u624B\u673A\u53F7\u7801",minWidth:"200px",colKey:"managerPhone"},{title:"\u72B6\u6001",colKey:"activeStatus",minWidth:"120px",width:150,cell:(F,{row:s})=>{const m={0:{label:"\u8349\u7A3F"},1:{label:"\u7981\u7528"},2:{label:"\u542F\u7528"}};return F("span",{class:`status-dot status-dot-${s.activeStatus}`},m[s.activeStatus].label)}},{title:"\u66F4\u65B0\u65F6\u95F4",minWidth:"200px",width:200,colKey:"updateTime",sorter:!0,sortType:"all"},{align:"left",fixed:"right",width:370,minWidth:"370px",colKey:"op",title:"\u64CD\u4F5C"}];const he={class:"baseList bg-wt min-h"},Fe={class:"tableBoxs"},_e={class:"newBox"},Ce=["onClick"],be=["onClick"],Be=["onClick"],ye=["onClick"],De=["onClick"],Ae=["onClick"],ke=j({__name:"TableList",props:{listData:{type:Object,default:()=>({})},pagination:{type:Object,default:()=>({})}},emits:["handleClickEdit","handleBuild","handleClickDelete","handleSort","onPageChange","handleRefreshCache"],setup(F,{emit:s}){const m=F;I(m,()=>{n.value=m.listData,l.value=m.pagination,b.value=!1});const f=J(),C=u({sortBy:"serviceCallNumber"}),d=u({table:{sortIcon:t=>t&&t(ce)}}),n=u([]),l=u({defaultPageSize:10,total:0,defaultCurrent:1}),S="index",b=u(!0),D=t=>{C.value=t,s("handleSort",t)},B=u([1,2]),A=t=>{B.value=t},i=t=>{f.push("region/editRegion/"+t.id+"/"+t.isActive)},h=t=>{s("handleClickEdit",t)},o=t=>{s("handleClickDelete",t,3)},g=t=>{f.push("region/setBusiness/"+t.id)},y=(t,k)=>{s("handleClickDelete",t,k)},w=t=>{l.value.defaultCurrent=t.current,l.value.defaultPageSize=t.pageSize,s("onPageChange",{defaultCurrent:t.current,defaultPageSize:t.pageSize})},P=t=>{s("handleRefreshCache",t.id)},N=()=>{s("handleBuild")};return(t,k)=>{const T=E("t-table"),L=E("t-config-provider");return z(),H("div",he,[r("div",Fe,[r("div",_e,[r("button",{class:"bt newBoxbutton",onClick:k[0]||(k[0]=c=>N())},"\u65B0\u5EFA")]),v(L,{"global-config":d.value},{default:_(()=>[v(T,{data:n.value,columns:V(fe),"row-key":S,"vertical-align":"middle",hover:!0,pagination:l.value.total<=10||!l.value.total?null:l.value,"disable-data-page":l.value.total<=10,"selected-row-keys":B.value,loading:b.value,sort:C.value,"hide-sort-tips":!0,"show-sort-column-bg-color":!0,"table-content-width":"100%",onPageChange:w,onSortChange:D,onSelectChange:A},{empty:_(()=>[v(se)]),updateTime:_(({row:c})=>[r("div",null,[r("div",null,R(c.updateTime?V(ie)(new Date(c.updateTime)):"-"),1)])]),op:_(({row:c})=>[r("a",{class:G(c.activeStatus!==0?"text-forbidden btn-dl btn-split-right":"btn-dl btn-split-right"),onClick:e=>o(c)},"\u5220\u9664",10,Ce),r("a",{class:"font-bt line",onClick:e=>h(c)},"\u7F16\u8F91",8,be),r("a",{class:"font-bt line btn-split-left",onClick:e=>g(c)},"\u8C03\u5EA6\u914D\u7F6E",8,Be),r("a",{class:"font-bt line btn-split-left",onClick:e=>i(c)},"\u8BBE\u7F6E\u670D\u52A1",8,ye),r("a",{class:"font-bt line btn-split-left",onClick:e=>y(c,c.activeStatus)},R(c.activeStatus===2?"\u7981\u7528":"\u542F\u7528"),9,De),r("a",{class:"font-bt btn-split-left",onClick:e=>P(c)},"\u7F13\u5B58\u5237\u65B0",8,Ae)]),_:1},8,["data","columns","pagination","disable-data-page","selected-row-keys","loading","sort"])]),_:1},8,["global-config"])])])}}});var Ee=$(ke,[["__scopeId","data-v-76656cc0"],["__file","D:/Workspace/front/jz/project-xzb-pc-admin-vue3-java/src/pages/service/region/components/TableList.vue"]]);const Se={key:1,class:"base-up-wapper bgTable"},xe=j({__name:"index",setup(F){const s=Q(),m=u(!1),f=u([]),C=u(null),d=u("\u65B0\u589E\u533A\u57DF"),n=u(!1),l=u("\u786E\u5B9A\u5220\u9664\u8BE5\u533A\u57DF\u5417\uFF1F"),S=u(""),b=u(!1),D=u(0),B=u(""),A=u({defaultPageSize:10,total:0,defaultCurrent:1}),i=u({isAsc1:"false",isAsc2:"",orderBy1:"updateTime",orderBy2:"",pageNo:1,pageSize:10}),h=u({cityCode:"",name:"",managerPhone:"",managerName:""}),o=u(""),g=async e=>{await Y(e).then(a=>{a.code===200?(f.value=a.data.list,A.value.total=Number(a.data.total)):p.error(a.msg)}).catch(a=>{console.log(a)})},y=()=>{m.value=!1,n.value=!1},w=()=>{b.value=!1,m.value=!0,d.value="\u65B0\u5EFA\u533A\u57DF"},P=e=>{B.value=e.id,h.value.cityCode=e.cityCode,h.value.name=e.name,h.value.managerPhone=e.managerPhone,h.value.managerName=e.managerName,m.value=!0,b.value=!0,d.value="\u7F16\u8F91\u533A\u57DF"},N=async e=>{d.value==="\u65B0\u5EFA\u533A\u57DF"?await Z(e).then(a=>{a.code===200?(p.success("\u65B0\u589E\u6210\u529F"),C.value.onClickCloseBtn(),g(i.value)):(p.error(a.data.msg),C.value.onClickCloseBtn())}).catch(a=>{console.log(a)}):await ee({managerName:e.managerName,managerPhone:e.managerPhone},B.value).then(a=>{a.data.code===200?(p.success("\u7F16\u8F91\u6210\u529F"),C.value.onClickCloseBtn(),g(i.value)):p.error(a.data.msg)}).catch(a=>{console.log(a)})},t=(e,a)=>{D.value=a,o.value=e.id,n.value=!0,a===3?(l.value="\u786E\u5B9A\u5220\u9664\u8BE5\u533A\u57DF\u5417\uFF1F",d.value="\u5220\u9664\u533A\u57DF"):a===0||a===1?(l.value="\u786E\u5B9A\u542F\u7528\u8BE5\u533A\u57DF\u5417\uFF1F",d.value="\u542F\u7528\u533A\u57DF"):(l.value="\u533A\u57DF\u88AB\u7981\u7528\u540E\uFF0C\u7528\u6237\u5C06\u65E0\u6CD5\u8FDB\u884C\u670D\u52A1\u4E0B\u5355\uFF0C\u662F\u5426\u7981\u7528\uFF1F",d.value="\u7981\u7528\u533A\u57DF")},k=async()=>{D.value===3?await te(o.value).then(e=>{e.code===200?(p.success("\u5220\u9664\u6210\u529F"),n.value=!1,g(i.value)):(p.error(e.data.msg),n.value=!1)}).catch(e=>{console.log(e)}):D.value===1||D.value===0?await ae(o.value).then(e=>{e.data.code===200?(p.success("\u542F\u7528\u6210\u529F"),n.value=!1,g(i.value)):(p.error(e.data.msg),n.value=!1)}).catch(e=>{console.log(e)}):await ue(o.value).then(e=>{e.data.code===200?(p.success("\u7981\u7528\u6210\u529F"),n.value=!1,g(i.value)):(p.error(e.data.msg),n.value=!1)}).catch(e=>{console.log(e)})},T=e=>{i.value.isAsc1=e.descending===!0?"false":"true",g(i.value)},L=e=>{i.value.pageNo=e.defaultCurrent,i.value.pageSize=e.defaultPageSize,g(i.value)},c=async e=>{await le(e).then(a=>{a.data.code===200?p.success("\u5237\u65B0\u6210\u529F"):p.error(a.data.msg)}).catch(a=>{console.log(a)})};return X(()=>{A.value.defaultCurrent=1,A.value.defaultPageSize=10,S.value=s.path,s.path==="/service/region"&&g(i.value)}),(e,a)=>{const U=E("router-view");return S.value!=="/service/region"?(z(),K(U,{key:0})):(z(),H("div",Se,[x(" \u8868\u683C "),v(Ee,{"list-data":f.value,pagination:A.value,onHandleBuild:w,onHandleClickDelete:t,onHandleClickEdit:P,onFetchData:g,onHandleSort:T,onHandleRefreshCache:c,onOnPageChange:L},null,8,["list-data","pagination"]),x(" end "),x(" \u65B0\u589E\uFF0C\u7F16\u8F91\u5F39\u7A97 "),v(pe,{ref_key:"dialogForm",ref:C,visible:m.value,title:d.value,cityList:V(oe),edit:b.value,formData:h.value,onHandleClose:y,onConfirmEdit:N},null,8,["visible","title","cityList","edit","formData"]),x(" end "),x(" \u5220\u9664\u5F39\u7A97 "),v(re,{"dialog-delete-visible":n.value,"delete-text":l.value,title:d.value,onHandleDelete:k,onHandleClose:y},null,8,["dialog-delete-visible","delete-text","title"]),x(" end ")]))}}});var je=$(xe,[["__file","D:/Workspace/front/jz/project-xzb-pc-admin-vue3-java/src/pages/service/region/index.vue"]]);export{je as default};
